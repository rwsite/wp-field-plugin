import{c as g,j as r,r as y}from"./client.js";const b=({name:n,fields:d,value:p=[],min:l=0,max:c=0,buttonLabel:j="Add Row",layout:i="table"})=>{const[a,w]=y.useState(p.length>0?p:l>0?Array(l).fill({}):[]),f=()=>{c>0&&a.length>=c||w([...a,{}])},u=e=>{l>0&&a.length<=l||w(a.filter((t,s)=>s!==e))},N=(e,t,s)=>{const o=[...a];o[e]={...o[e],[t]:s},w(o)},h=(e,t,s)=>{const o=e.name,R=s[o]||"",v=`${n}[${t}][${o}]`;return r.jsxs("div",{className:"wp-field-repeater-field",children:[e.label&&r.jsx("label",{children:e.label}),r.jsx("input",{type:e.type||"text",name:v,value:R,onChange:x=>N(t,o,x.target.value),placeholder:e.placeholder||"",required:e.required||!1,className:e.class||""}),e.description&&r.jsx("p",{className:"description",children:e.description})]},o)},m=(e,t)=>i==="table"?r.jsxs("tr",{className:"wp-field-repeater-row","data-index":t,children:[d.map(s=>r.jsx("td",{children:h(s,t,e)},s.name)),r.jsx("td",{className:"wp-field-repeater-actions",children:r.jsx("button",{type:"button",className:"button wp-field-repeater-remove",onClick:()=>u(t),disabled:l>0&&a.length<=l,children:"Remove"})})]},t):r.jsxs("div",{className:"wp-field-repeater-row","data-index":t,children:[d.map(s=>h(s,t,e)),r.jsx("div",{className:"wp-field-repeater-actions",children:r.jsx("button",{type:"button",className:"button wp-field-repeater-remove",onClick:()=>u(t),disabled:l>0&&a.length<=l,children:"Remove"})})]},t);return r.jsxs("div",{className:"wp-field-repeater","data-name":n,"data-layout":i,children:[r.jsx("div",{className:"wp-field-repeater-rows",children:i==="table"?r.jsx("table",{className:"widefat",children:r.jsx("tbody",{children:a.map((e,t)=>m(e,t))})}):a.map((e,t)=>m(e,t))}),r.jsx("button",{type:"button",className:"button wp-field-repeater-add",onClick:f,disabled:c>0&&a.length>=c,children:j})]})};window.WPFieldRepeater=b;typeof window<"u"&&window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-wp-field-repeater]").forEach(n=>{const d=JSON.parse(n.dataset.wpFieldRepeater);g(n).render(r.jsx(b,{...d}))})});
