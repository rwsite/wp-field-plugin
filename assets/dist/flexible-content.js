import{c as B,j as t,r as x}from"./client.js";const h=({name:a,layouts:n,value:b=[],min:i=0,max:d=0,buttonLabel:m="Add Layout"})=>{const[c,r]=x.useState(b),[f,p]=x.useState(!1),j=e=>{d>0&&c.length>=d||(r([...c,{acf_fc_layout:e}]),p(!1))},w=e=>{i>0&&c.length<=i||r(c.filter((l,o)=>o!==e))},k=(e,l,o)=>{const s=[...c];s[e]={...s[e],[l]:o},r(s)},y=e=>{const l=document.querySelector(`[data-block-index="${e}"]`);l&&l.classList.toggle("collapsed")},N=(e,l,o)=>{const s=e.name,u=o[s]||"",g=`${a}[${l}][${s}]`;return t.jsxs("div",{className:"wp-field-flexible-field",children:[e.label&&t.jsx("label",{children:e.label}),t.jsx("input",{type:e.type||"text",name:g,value:u,onChange:C=>k(l,s,C.target.value),placeholder:e.placeholder||"",required:e.required||!1,className:e.class||""}),e.description&&t.jsx("p",{className:"description",children:e.description})]},s)},v=(e,l)=>{const o=e.acf_fc_layout,s=n[o];return s?t.jsxs("div",{className:"wp-field-flexible-block","data-block-index":l,"data-layout":o,children:[t.jsxs("div",{className:"wp-field-flexible-block-header",children:[t.jsx("h4",{children:s.label}),t.jsxs("div",{className:"wp-field-flexible-block-controls",children:[t.jsx("button",{type:"button",className:"button wp-field-flexible-collapse",onClick:()=>y(l),children:"âˆ’"}),t.jsx("button",{type:"button",className:"button wp-field-flexible-remove",onClick:()=>w(l),disabled:i>0&&c.length<=i,children:"Remove"})]})]}),t.jsxs("div",{className:"wp-field-flexible-block-content",children:[t.jsx("input",{type:"hidden",name:`${a}[${l}][acf_fc_layout]`,value:o}),s.fields.map(u=>N(u,l,e))]})]},l):null};return t.jsxs("div",{className:"wp-field-flexible","data-name":a,children:[t.jsx("div",{className:"wp-field-flexible-blocks",children:c.map((e,l)=>v(e,l))}),t.jsxs("div",{className:"wp-field-flexible-add-block",children:[t.jsx("button",{type:"button",className:"button",onClick:()=>p(!f),disabled:d>0&&c.length>=d,children:m}),f&&t.jsx("div",{className:"wp-field-flexible-layouts",children:Object.entries(n).map(([e,l])=>t.jsx("button",{type:"button",className:"button",onClick:()=>j(e),children:l.label},e))})]})]})};window.WPFieldFlexibleContent=h;typeof window<"u"&&window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-wp-field-flexible]").forEach(a=>{const n=JSON.parse(a.dataset.wpFieldFlexible);B(a).render(t.jsx(h,{...n}))})});
